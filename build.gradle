buildscript {
    repositories {
        mavenLocal()
        jcenter()
        maven { url 'https://token.artifactoryonline.com/token/public-gradle-plugins-local/' }
        maven { url 'https://plugins.gradle.org/m2/' }
    }
    dependencies {
        classpath 'io.token.gradle:token-gradle:1.0.48'
        classpath 'net.ltgt.gradle:gradle-apt-plugin:0.8'
    }
}

apply plugin: 'io.token.gradle.lib'
apply plugin: 'io.token.gradle.publish'

base {
    failOnCheckstyleFailures = true
}

group = 'io.token.sdk'
version = '1.0.2'

ext {
    ver = [
        tokenProto: '1.0.215',
        tokenRpc: '1.0.36',
        tokenSecurity: '1.0.27',
        tokenUtil: '1.0.8',
    ]
}

dependencies {
    compile group: 'io.token.proto', name: 'tokenio-proto-external', version: ver.tokenProto
    compile group: 'io.token.rpc', name: 'tokenio-rpc-lib', version: ver.tokenRpc
    compile group: 'io.token.security', name: 'tokenio-security-lib', version: ver.tokenSecurity
    compile group: 'io.token.util', name: 'tokenio-util', version: ver.tokenUtil

    testCompile group: 'io.token.rpc', name: 'tokenio-rpc-testing', version: ver.tokenRpc
    compile group: 'io.token.security', name: 'tokenio-security-testing', version: ver.tokenSecurity
}

tasks.withType(Test) {
    // Pipe through the properties that we care about to tests.
    systemProperty 'TOKEN_GATEWAY', System.getProperty('TOKEN_GATEWAY', null)
    systemProperty 'TOKEN_BANK', System.getProperty('TOKEN_BANK', null)
    systemProperty 'TOKEN_USE_SSL', System.getProperty('TOKEN_USE_SSL', null)
}
