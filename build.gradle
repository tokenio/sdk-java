buildscript {
    repositories {
        mavenLocal()
        jcenter()
        maven { url 'https://token.artifactoryonline.com/token/public-gradle-plugins-local/' }
        maven { url 'https://plugins.gradle.org/m2/' }
    }
    dependencies {
        classpath 'io.token.gradle:token-gradle:1.0.22'
        classpath 'net.ltgt.gradle:gradle-apt-plugin:0.8'
    }
}

apply plugin: 'io.token.gradle.lib'
apply plugin: 'io.token.gradle.publish'

group = 'io.token.sdk'
version = '1.0.0'

ext {
    ver = [
        grpc: '0.15.0',
        tokenProto: '1.0.80',
        tokenRpc: '1.0.13',
        tokenSecurity: '1.0.10',
        tokenUtil: '1.0.6',
    ]
}

dependencies {
    compile group: 'io.token.proto', name: 'external', version: ver.tokenProto
    compile group: 'io.token.rpc', name: 'lib', version: ver.tokenRpc
    compile group: 'io.token.security', name: 'security', version: ver.tokenSecurity
    compile group: 'io.token.util', name: 'util', version: ver.tokenUtil

    testCompile group: 'io.token.rpc', name: 'testing', version: ver.tokenRpc
}

tasks.withType(Test) {
    // Pipe through the properties that we care about to tests.
    systemProperty 'TOKEN_GATEWAY', System.getProperty('TOKEN_GATEWAY', null)
    systemProperty 'TOKEN_BANK', System.getProperty('TOKEN_BANK', null)
}
